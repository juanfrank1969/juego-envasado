<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>El Envasado</title>
    
    <!-- ConfiguraciÃ³n MÃ³vil -->
    <meta name="theme-color" content="#f0fdf4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Envasado">
    <link rel="apple-touch-icon" href="https://em-content.zobj.net/source/apple/354/package_1f4e6.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body { background-color: #f0fdf4; font-family: ui-sans-serif, system-ui, sans-serif; overflow: hidden; touch-action: manipulation; }
        .box-part { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); opacity: 0; transform: translateY(20px); pointer-events: none; }
        .box-part.visible { opacity: 1; transform: translateY(0); }
        .cardboard { background-color: #d4a373; border: 2px solid #9c6644; position: absolute; }
        .key-btn { transition: all 0.1s; }
        .key-btn:active { transform: scale(0.9); background-color: #dcfce7; }
        #character { transition: all 0.5s ease; }
        .char-container { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; position: relative; z-index: 10; }
    </style>
</head>
<body class="h-screen flex flex-col items-center justify-between p-6 pb-12">

    <!-- Marcador -->
    <div class="text-center">
        <h1 class="text-3xl font-black text-green-800 tracking-tighter">ðŸ“¦ EL ENVASADO</h1>
        <div class="bg-white px-4 py-1 rounded-full shadow-sm inline-block mt-2 border border-green-100">
            <span class="text-sm font-bold text-green-600 uppercase">Puntos: <span id="score">0</span></span>
        </div>
    </div>

    <!-- Contenedor de la Caja -->
    <div class="relative w-64 h-64 bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border-8 border-green-50">
        <div class="char-container">
            <div id="character" class="text-8xl">ðŸ˜°</div>
        </div>
        
        <div id="p1" class="box-part cardboard w-full bottom-0 h-1/5 z-20"></div>
        <div id="p2" class="box-part cardboard w-full h-full bottom-0 bg-[#ccb7a3] z-10"></div>
        <div id="p3" class="box-part cardboard h-full left-0 w-1/5 z-30"></div>
        <div id="p4" class="box-part cardboard h-full right-0 w-1/5 z-30"></div>
        <div id="p5" class="box-part cardboard w-full bottom-0 h-3/5 z-40 opacity-95"></div>
        <div id="p6" class="box-part cardboard w-full h-full top-0 z-50 flex items-center justify-center bg-[#8d5c3d]">
            <div class="border-4 border-white/30 p-2 rounded-lg text-white font-black uppercase tracking-widest">Listo</div>
        </div>
    </div>

    <!-- Interfaz -->
    <div class="w-full max-w-sm text-center">
        <div id="cat" class="text-[10px] font-black text-green-700 bg-green-100 px-4 py-1 rounded-full mb-4 inline-block uppercase tracking-widest">Cargando...</div>
        <div id="word" class="flex justify-center gap-2 mb-8 text-3xl font-mono font-bold text-green-900 min-h-[40px]"></div>
        
        <div id="keyboard" class="grid grid-cols-7 gap-1.5 md:gap-2"></div>
        
        <button id="next-btn" onclick="init()" class="hidden mt-8 bg-green-600 text-white w-full py-4 rounded-2xl font-black shadow-lg uppercase">Siguiente</button>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            const sw = 'self.addEventListener("fetch", (e) => {});';
            const blob = new Blob([sw], {type: 'text/javascript'});
            navigator.serviceWorker.register(URL.createObjectURL(blob)).catch(()=>{});
        }

        // Base de datos de palabras expandida (Quintuplicada)
        const words = [
            // FRUTAS
            {w: "MANZANA", c: "FRUTA"}, {w: "BANANO", c: "FRUTA"}, {w: "NARANJA", c: "FRUTA"}, {w: "SANDIA", c: "FRUTA"}, {w: "CEREZA", c: "FRUTA"},
            {w: "FRESA", c: "FRUTA"}, {w: "MANGO", c: "FRUTA"}, {w: "PIÃ‘A", c: "FRUTA"}, {w: "LIMON", c: "FRUTA"}, {w: "UVA", c: "FRUTA"},
            {w: "GUAYABA", c: "FRUTA"}, {w: "PERA", c: "FRUTA"}, {w: "MELON", c: "FRUTA"}, {w: "COCO", c: "FRUTA"}, {w: "MORA", c: "FRUTA"},
            // ANIMALES
            {w: "ELEFANTE", c: "ANIMAL"}, {w: "TIBURON", c: "ANIMAL"}, {w: "JIRAFA", c: "ANIMAL"}, {w: "CABALLO", c: "ANIMAL"}, {w: "CONEJO", c: "ANIMAL"},
            {w: "BALLENA", c: "ANIMAL"}, {w: "TIGRE", c: "ANIMAL"}, {w: "PANTERA", c: "ANIMAL"}, {w: "DELFIN", c: "ANIMAL"}, {w: "AGUILA", c: "ANIMAL"},
            {w: "SERPIENTE", c: "ANIMAL"}, {w: "PINGÃœINO", c: "ANIMAL"}, {w: "MONO", c: "ANIMAL"}, {w: "LOBO", c: "ANIMAL"}, {w: "GATO", c: "ANIMAL"},
            // PAISES
            {w: "COLOMBIA", c: "PAIS"}, {w: "MEXICO", c: "PAIS"}, {w: "ESPAÃ‘A", c: "PAIS"}, {w: "FRANCIA", c: "PAIS"}, {w: "BRASIL", c: "PAIS"},
            {w: "ARGENTINA", c: "PAIS"}, {w: "CANADA", c: "PAIS"}, {w: "ITALIA", c: "PAIS"}, {w: "JAPON", c: "PAIS"}, {w: "ALEMANIA", c: "PAIS"},
            {w: "CHILE", c: "PAIS"}, {w: "PERU", c: "PAIS"}, {w: "EGIPTO", c: "PAIS"}, {w: "RUSIA", c: "PAIS"}, {w: "CHINA", c: "PAIS"},
            // OBJETOS / HOGAR
            {w: "GUITARRA", c: "MUSICA"}, {w: "MARTILLO", c: "HERRAMIENTA"}, {w: "LAMPARA", c: "HOGAR"}, {w: "ESPEJO", c: "HOGAR"}, {w: "CUADERNO", c: "ESTUDIO"},
            {w: "TELEVISOR", c: "HOGar"}, {w: "SILLA", c: "HOGAR"}, {w: "VENTANA", c: "CONSTRUCCION"}, {w: "RELOJ", c: "ACCESORIO"}, {w: "MOCHILA", c: "VIAJE"},
            {w: "CELULAR", c: "TECNOLOGIA"}, {w: "PEINE", c: "BELLEZA"}, {w: "ALMOHADA", c: "DORMITORIO"}, {w: "CUADRO", c: "ARTE"}, {w: "LLAVE", c: "SEGURIDAD"},
            // CIENCIA / ESPACIO
            {w: "PLANETA", c: "ESPACIO"}, {w: "ESTRELLA", c: "ESPACIO"}, {w: "COMETA", c: "ESPACIO"}, {w: "COHETE", c: "ESPACIO"}, {w: "GALAXIA", c: "ESPACIO"},
            {w: "TELESCOPIO", c: "CIENCIA"}, {w: "ATOMO", c: "CIENCIA"}, {w: "GRAVEDAD", c: "CIENCIA"}, {w: "OXIGENO", c: "CIENCIA"}, {w: "METEORITO", c: "ESPACIO"},
            // DEPORTES
            {w: "FUTBOL", c: "DEPORTE"}, {w: "NATACION", c: "DEPORTE"}, {w: "CICLISMO", c: "DEPORTE"}, {w: "TENIS", c: "DEPORTE"}, {w: "BOXEO", c: "DEPORTE"},
            {w: "BEISBOL", c: "DEPORTE"}, {w: "GOLF", c: "DEPORTE"}, {w: "VOLEIBOL", c: "DEPORTE"}, {w: "ATLETISMO", c: "DEPORTE"}, {w: "ESGRIMA", c: "DEPORTE"},
            // PROFESIONES
            {w: "DOCTOR", c: "TRABAJO"}, {w: "MAESTRO", c: "TRABAJO"}, {w: "INGENIERO", c: "TRABAJO"}, {w: "BOMBERO", c: "TRABAJO"}, {w: "POLICIA", c: "TRABAJO"},
            {w: "ARTISTA", c: "TRABAJO"}, {w: "COCINERO", c: "TRABAJO"}, {w: "PILOTO", c: "TRABAJO"}, {w: "DENTISTA", c: "TRABAJO"}, {w: "MUSICO", c: "TRABAJO"},
            // COMIDA / COCINA
            {w: "PIZZA", c: "COMIDA"}, {w: "HAMBURGUESA", c: "COMIDA"}, {w: "PASTA", c: "COMIDA"}, {w: "ENSALADA", c: "COMIDA"}, {w: "ARROZ", c: "COMIDA"},
            {w: "SOPA", c: "COMIDA"}, {w: "QUESO", c: "COMIDA"}, {w: "HUEVO", c: "COMIDA"}, {w: "CHOCOLATE", c: "DULCE"}, {w: "CARAMELO", c: "DULCE"},
            // TECNOLOGIA
            {w: "INTERNET", c: "TECNOLOGIA"}, {w: "COMPUTADOR", c: "TECNOLOGIA"}, {w: "PANTALLA", c: "TECNOLOGIA"}, {w: "TECLADO", c: "TECNOLOGIA"}, {w: "MOUSE", c: "TECNOLOGIA"},
            {w: "ROBOT", c: "TECNOLOGIA"}, {w: "CODIGO", c: "TECNOLOGIA"}, {w: "SOFTWARE", c: "TECNOLOGIA"}, {w: "BATERIA", c: "TECNOLOGIA"}, {w: "CAMARA", c: "TECNOLOGIA"},
            // NATURALEZA
            {w: "BOSQUE", c: "NATURALEZA"}, {w: "MONTAÃ‘A", c: "NATURALEZA"}, {w: "DESIERTO", c: "NATURALEZA"}, {w: "OCEANO", c: "NATURALEZA"}, {w: "VOLCAN", c: "NATURALEZA"},
            {w: "RIVER", c: "NATURALEZA"}, {w: "SELVA", c: "NATURALEZA"}, {w: "CASCADA", c: "NATURALEZA"}, {w: "CUEVA", c: "NATURALEZA"}, {w: "PRADERA", c: "NATURALEZA"}
        ];

        let secret, letters, fails, score = 0;
        let lastWord = "";

        function init() {
            let item;
            do {
                item = words[Math.floor(Math.random() * words.length)];
            } while (item.w === lastWord);
            
            lastWord = item.w;
            secret = item.w;
            document.getElementById('cat').textContent = item.c;
            letters = []; fails = 0;
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('character').textContent = "ðŸ˜°";
            for(let i=1; i<=6; i++) document.getElementById('p'+i).classList.remove('visible');
            render(); renderKeys();
        }

        function render() {
            const display = secret.split('').map(l => letters.includes(l) ? l : "_").join(" ");
            document.getElementById('word').textContent = display;
            if(!display.includes("_")) win();
        }

        function renderKeys() {
            const kb = document.getElementById('keyboard');
            kb.innerHTML = '';
            "ABCDEFGHIJKLMNÃ‘OPQRSTUVWXYZ".split('').forEach(l => {
                const btn = document.createElement('button');
                btn.textContent = l;
                btn.className = "key-btn bg-white py-3 rounded-lg shadow-sm font-bold text-green-800 text-sm disabled:opacity-20";
                btn.disabled = letters.includes(l) || fails >= 6;
                btn.onclick = () => {
                    letters.push(l);
                    if(!secret.includes(l)) {
                        fails++;
                        document.getElementById('p'+fails).classList.add('visible');
                        if(fails >= 6) lose();
                    }
                    render(); renderKeys();
                };
                kb.appendChild(btn);
            });
        }

        function win() {
            score += 100;
            document.getElementById('score').textContent = score;
            document.getElementById('character').textContent = "ðŸ˜Ž";
            document.getElementById('next-btn').classList.remove('hidden');
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.8 } });
        }

        function lose() {
            document.getElementById('character').textContent = "ðŸ“¦";
            document.getElementById('word').textContent = secret;
            document.getElementById('next-btn').classList.remove('hidden');
            document.getElementById('next-btn').textContent = "REINTENTAR";
        }

        init();
    </script>
</body>
</html>


